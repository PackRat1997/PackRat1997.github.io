$(function(){$(".credits-popup").click(function(){document.getElementById("game-embed").actionOpenShop(1);return false})});$(function(){$("#comment-form textarea").focus(function(){$("#comment-form input").stop().show().animate({marginTop:"3px"},100,"swing")});$("#comment-form textarea").blur(function(){if($(this).val()==""||$(this).val()==$(this).attr("alt")){$("#comment-form input").stop().animate({marginTop:"-25px"},100,"swing",function(){$(this).hide()})}});$("#help-buttonlink").click(function(){if($("#help-form").data("do-submit")==true){$("#help-form").submit()}});function a(){var e=[],d;var b=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var c=0;c<b.length;c++){d=b[c].split("=");e.push(d[0]);e[d[0]]=d[1]}return e}$("a.social-close").click(function(){$(this).parent().fadeOut();return false})});$(function(){if(typeof sendEvent!=="undefined"){setTimeout(function(){sendEvent("play","")},120000)}});$(function(){if(typeof game_data!=="undefined"){if(game_data.is_visible===1&&game_data.is_internal!==1){if(typeof user_id!=="undefined"){if(user_id!=0){setTimeout(function(){$.ajax({url:"/games/activity/add/",dataType:"JSON",type:"POST",data:{verb:"play",object_value:game_data.game_id,object_type:"game"},async:true,success:function(a){}},5000)})}}}}});function showFlashError(a,c){var b=$("#no-flash-notification");if(b){if(a){b.css("width",a+"px")}if(c){b.css("height",c+"px")}b.show()}}function getFlash(){window.open("http://get.adobe.com/flashplayer/","_blank");return false}function getShockwave(){window.open("http://get.adobe.com/shockwave/","_blank");return false}function shockwaveIsInstalled(){var b="0";var a=false;if(navigator.mimeTypes&&navigator.mimeTypes["application/x-director"]&&navigator.mimeTypes["application/x-director"].enabledPlugin){if(navigator.plugins&&navigator.plugins["Shockwave for Director"]&&(tVersionIndex=navigator.plugins["Shockwave for Director"].description.indexOf("."))!=-1){b=navigator.plugins["Shockwave for Director"].description.substring(tVersionIndex-2,tVersionIndex+2)}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("MSIE")>=0){try{var d=new ActiveXObject("SWCtl.SWCtl");if(d!=null){b=d.ShockwaveVersion("")}}catch(c){}if(d!=null){delete d}}}if(parseInt(b)>=11){a=true}return a}var shockwave_check_timeout;function showShockwaveError(){$("#no-shockwave-notification").insertBefore("#shockwave-game-container").slideDown();$("#no-shockwave-notification").show()}function shockwaveCheckInstall(){if(shockwaveIsInstalled()){$("#no-shockwave-notification").hide()}}function newUserTrigger(a,b){$.ajax({url:"/games/ajax/newuser/",dataType:"JSON",type:"GET",success:function(c){var d=c.data;$(".welcome-bar").remove();$("body").prepend(d);$(".welcome-bar .drop-top-close").click(function(){$(".welcome-bar").remove()});$("html, body").animate({scrollTop:0},"fast");$(".welcome-bar").slideDown()}})}var _inGame=false;var _text="";function lobbyInGame(a,b){_inGame=a;_text=b}function lobbyConfirmLeave(){if(_inGame){return _text}}window.onbeforeunload=lobbyConfirmLeave;function gameFbCall(b){var a=location.protocol+"//"+location.hostname;document.getElementById("fb-game-share").contentWindow.postMessage(JSON.stringify(b),a)}$(window).bind("message",function(b){if(typeof b.originalEvent.origin==="undefined"||b.originalEvent.origin!==(location.protocol+"//"+location.host)){return}try{var a=JSON.parse(b.originalEvent.data)}catch(c){return}if(typeof a.facebook_response==="undefined"){return}$(window).trigger("mc:facebook:response",a.facebook_response)});function notifyGameEvent(a){if(typeof gptAdSlots[4]!=="undefined"){googletag.pubads().refresh([gptAdSlots[4]])}}jQuery(function(){$(".show-leaderboards").click(function(){MC.Leaderboard.show(0,function(){})})});var _bpEventsInitTimer;function BPIsReady(){_bpEventsInitTimer=setInterval(function(){$("#game-embed")[0].registerHandler("flashEventHandler")},5000)}function flashEventHandler(b,a){clearInterval(_bpEventsInitTimer);switch(b){case"game_action":if(typeof a!=="undefined"){switch(a.name){case"game_start":case"game_end":case"select_1vs1_tier":case"select_tournament_tier":notifyGameEvent(a.name);break;default:break}}break}}function dispatchFlashEvent(b,a){return getGameFlashObject().dispatch(b,a)};